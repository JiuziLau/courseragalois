%% -*- coding:utf-8 -*-
\chapter{Ring extensions, norms and traces, reduction modulo $p$}
We build a tool for finding elements in Galois groups, learning to use
the reduction modulo $p$. For this, we have to talk a little bit about
integral ring extensions and also about norms and traces.


\section{Integral elements over a ring}

Let $P \in \mathbb{Z}\left[X\right]$. We want to know what is
$Gal\left(P\right)$. Just a reminder that $Gal\left(P\right) =
Gal\left(K/\mathbb{Q}\right)$ where $K$ is a
\nameref{def:splittingfield} of $P$. We have already done the work for
several types of polynomials: \nameref{def:cyclotomicpolynomial}s,
\nameref{sec:kummerextension} and so on.

Sometimes, if our polynomial is a kind of combination of them, then the
explicit information about the roots helps to calculate the Galois
group. For instance if we have polynomial $X^5 - 2$ we know it's
roots: $\sqrt[5]{2}, j^k \sqrt[5]{2}$, where
$j= e^{\frac{2 \pi i}{5}}, 1 \le k \le 4$. Now we have a lot about the
\nameref{def:galoisgroup}. If $K$ is the splitting field of the
polynomial then we have the following towers:

  \begin{tikzpicture}[descr/.style={fill=white,inner sep=2.5pt}]
    \matrix (m) [matrix of math nodes, row sep=3em,
      column sep=3em]
            { & \mathbb{Q}\left(j\right) & \\
              \mathbb{Q} & & \mathbb{Q}\left(\sqrt[5]{2}, j\right) = K\\
              & \mathbb{Q}\left(\sqrt[5]{2}\right) & \\ };
            \path[->,font=\scriptsize]
            (m-2-1) edge node[descr] {$ 4 $} (m-1-2)
            (m-1-2) edge node[descr] {$ 5 $} (m-2-3)
            (m-2-1) edge node[descr] {$ 5 $} (m-3-2)
            (m-3-2) edge node[descr] {$ 4 $} (m-2-3);
  \end{tikzpicture}
  
From that we know we can conclude that it follows that our Galois
group, contains a normal cyclic subgroup of a order 5:
$\mathbb{Z}/5\mathbb{Z}$.
\footnote{
  We have the following towers:
  $\mathbb{Q} \subset \mathbb{Q}\left(j\right) \subset
  \mathbb{Q}\left(j, \sqrt[5]{2}\right) = K$, where
  $\mathbb{Q}\left(j\right)$ and $\mathbb{Q}\left(j,
  \sqrt[5]{2}\right)$ are \nameref{def:galoisextension}s.
  By \nameref{thm:galoiscorrespondence} one can get that
  \[
  Gal\left(K/\mathbb{Q}\left(j\right)\right) \triangleleft
  Gal\left(K/\mathbb{Q}\right) = Gal\left(P\right).
  \]
  As soon as (see theorem \ref{thm:lec5_4}),
  \[
  \left|Gal\left(K/\mathbb{Q}\left(j\right)\right)\right| =
  \left[K:\mathbb{Q}\left(j\right)\right] = 5,
  \]
  the $Gal(P)$ has a normal subgroup of order 5.
}
And then 
the quotient is the Galois group of cyclotomic extension
\footnote{
  The quotient is
  \[
  Gal\left(K/\mathbb{Q}\left(j\right)\right)/
  Gal\left(K/\mathbb{Q}\right).
  \]
  It has order $20/5=4$ and therefore it is
  $\left(\mathbb{Z}/5\mathbb{Z}\right)^\times$. It is also
  $Gal\left(\mathbb{Q}\left(j\right)/\mathbb{Q}\right)$
}
, so this is
$\left(\mathbb{Z}/5\mathbb{Z}\right)^\times$.
So this is a group of
order 20.
\footnote{
  There is a General affine group:
  $Gal(P) \cong GA(1,5) \triangleleft S_5$
  \cite{groupwiki:s5structure, groupwiki:generalaffinegroup}
}
You can show that this 
is noncommutative, and from this exact sequence, you have some
information about it. But what will we do if we don't know the
roots. One of the tool that we will use is the reduction of modulo
prime and this will be the subject of the lecture.

\subsection{Ring extensions}
\begin{definition}[Integral element]
  Let $A$ be an \nameref{def:integraldomain}, i.e. a ring without zero
  divisors and let $B$ is an extension of $A$. The element $\alpha
  \in B$ is called integral over $A$ if $\alpha$ is a root of a
  \nameref{def:monicpolynomial} $P \in A\left[X\right]$.

  So one can write the following relation
  \[
  \alpha^n + a_{n-1}\alpha^{n-1} + \dots + a_1 \alpha + a_0 = 0, a_i
  \in A.
  \]
  \label{def:integralelement}
\end{definition}

\begin{example}
  $\frac{1}{2}$ is not integral element over $\mathbb{Z}$ but
  $\sqrt{2}$ is an \nameref{def:integralelement} over $\mathbb{Z}$.

  This is because the polynomial in the definition
  \ref{def:integralelement} is monic i.e. the leading coefficient is
  1. 
\end{example}

\begin{lemma}
  The following conditions are equvivalent
  \begin{enumerate}
  \item $\alpha$ is integral over $A$.
  \item $A\left[\alpha\right]$ is a finitely generated $A$-module
    (see definition \ref{def:fgmodule}).
  \item $A\left[\alpha\right] \subset C \subset B$ where $C$ is a a
    finitely generated 
    $A$-module (see definition \ref{def:fgmodule}). I.e. $A$ is contained in a finitely generated $A$-module.
  \end{enumerate}
  \label{lem:lec9_1}
  \begin{proof}
    $1 \to 2 \to 3$ is easy
    \footnote{
      $1 \to 2$ is really easy because the finite set $\{1,\alpha,
      \dots, \alpha^{n-1}\}$ generates
      $A\left[\alpha\right]$ i.e.
      $\forall x \in A\left[\alpha\right], \exists \{x_i\}
      \subset A$ such that $x = \sum_{i=0}^{n-1} x_i \alpha^{i}$.

      $2 \to 3$ is even more easy because $C=A\left[\alpha\right]$ will work.
    } and we will concentrate on $3 \to 1$.

    Let $x_1, \dots, x_r$ generate $C$ as $A$-module then we can write
    \footnote{
      As soon as $\alpha x_i \in C$ is an element of $C$ that can be written
      as a linear combination of
      $x_1, \dots, x_r$ with coefficients from $A$.
    }
    \[
    \alpha x_i = \sum \lambda_{ij}x_j,
    \]
    where $\lambda_{ij} \in A$. Consider the matrix
    $\Lambda = \{\lambda_{ij}\}$ and let $M = \alpha \cdot id -
    \Lambda$. Then
    \[
    M \cdot
    \begin{pmatrix}
      x_1 \\ \vdots \\ x_r
    \end{pmatrix} = 0.
    \]
    Thus (see (\ref{eq:lec4_det}) at theorem
    \ref{thm:structurefinitekalgebra} proof)
    \[
    \det M \cdot
    \begin{pmatrix}
      x_1 \\ \vdots \\ x_r
    \end{pmatrix} = 0.
    \]
    Therefore $det M \cdot C = 0$ but $1 \in C$ thus $\det M = 0$.
    The equation $\det M = 0$ can be considered as a polynomial with
    $\alpha$ as a root.
    \footnote{
      The polynomial will be a \nameref{def:monicpolynomial} because
      the matrix element can have $\alpha$ with coefficient equal $1$.
    }
  \end{proof}
\end{lemma}

\section{Integral extensions, integral closure, ring of integers of a
  number field}

\subsection{Integral extensions and integral closure}

\begin{definition}[Integral extension]
  Let $A \subset B$. $B$ is integral over $A$ if $\forall \alpha \in
  B$, $\alpha$ is an \nameref{def:integralelement} over $A$.  
  \label{def:integralextension}
\end{definition}

The following proposition is not a part of the lectures but it is
required for propositions \ref{prop:lec9_1} and \ref{prop:lec9_2}
proof.
\begin{proposition}
  Let $A$ is a sub-ring of $C$ and
  $\alpha_1, \alpha_2, \dots, \alpha_n \in C$,
  $\alpha_1$ is an integral over $A$,
  $\alpha_2$ is an integral over $A\left[\alpha_1\right]$, and so on,
  $\alpha_n$  is an integral over
  $A\left[\alpha_1, \alpha_2, \dots,   \alpha_{n-1}\right]$ then
  $A\left[\alpha_1, \alpha_2, \dots,\alpha_{n}\right]$ is a finitely
  generated $A$ module.
  \begin{proof}
    Lets proof by induction. The case $n=1$ follows directly from
    lemma \ref{lem:lec9_1}.

    Induction hypothesis gives us that
    $B = A\left[\alpha_1, \alpha_2, \dots,\alpha_{n-1}\right]$ is a finitely
    generated $A$ module and we have to prove that
    $S = A\left[\alpha_1, \alpha_2, \dots, \alpha_{n}\right]$ is a finitely
    generated $A$ module.

    For $B$ as a finitely generated $A$ module we have
    \[
    B = \sum_i A b_i,
    \]
    but $S = B\left[\alpha_n\right]$ is a finitely generated $B$
    module (thanks lemma \ref{lem:lec9_1}) and therefore
    \[
    S = \sum_j B s_j
    \]
    and as result
    \[
    S = \sum_{ij} A b_i s_j =
    \sum_{ij} A k_{ij}
    \]
    where $b_i s_j = k_{ij} \in S$ form a finite set of generators for $S$.
  \end{proof}
  \label{prop:lec9_add}
\end{proposition}

\begin{proposition}
  Let $A \subset B \subset C$. $B$ integral over $A$, $C$ integral
  over $B$ then $C$ is an \nameref{def:integralextension} over $A$.
  \begin{proof}
    Proof is left as an exercise.     
    \footnote{
      Let $x \in C$ then
      \[
      x^n + b_{n-1} x^{n-1} + \dots + b_1 x + b_0 = 0,
      \]
      where $b_i \in B$. Thus $x$ is an integral element over
      $A\left[b_0, b_1, \dots, b_{n-1}\right]$. We also have that $B$
      is integral over $A$ therefore $b_i$ is an integral over $A$. As
      result we have $b_0$ is integral over $A$, $b_1$ is integral
      over $A\left[b_0\right]$, and so on $x$ is integral over
       $A\left[b_0, b_1, \dots, b_{n-1}\right]$. As result with
      proposition \ref{prop:lec9_add} we have that
      $A\left[b_0, b_1, \dots, b_{n-1}, x\right]$ is a finitely
      generated $A$ module and as
      $A\left[x\right] \subset A\left[b_0, b_1, \dots, b_{n-1},
        x\right]$, the lemma \ref{lem:lec9_1} gives us that $x$ is an
      integral element over $A$.
    }
  \end{proof}
  \label{prop:lec9_1}
\end{proposition}

\begin{proposition}
  Let $B$ is a finitely generated over $A$ as a module (see definition
  \ref{def:fgmodule}) if and only if
  $B=A\left[\alpha_1, \dots, \alpha_r\right]$ where each $\alpha_i$ is
  an \nameref{def:integralelement} over $A$.
  \begin{proof}
    Proof is left as an exercise
    \footnote{
      ??? provide the proof
    }
  \end{proof}
  \label{prop:lec9_2}
\end{proposition}

\begin{proposition}
  Let $A \subset B$. I.e. $B$ is an arbitrary extension of $A$. The
  elements of $B$ which are integral over $A$ form a subring of $B$
  (one calls it as the integral closure of $A$ in $B$).
  \begin{proof}
    Let $\alpha, \beta$ are integral over $A$ then $A\left[\alpha,
      \beta\right]$ - finitely generated $A$-module (see definition
    \ref{def:fgmodule}). This follows directly from lemma
    \ref{lem:lec9_1}. It contains $\alpha + \beta$ and $\alpha \beta$
    and by lemma \ref{lem:lec9_1} the $\alpha + \beta$ and $\alpha
    \beta$ are integral over $A$. But this is exactly we need to
    proof. 
  \end{proof}
  \label{prop:lec9_3}
\end{proposition}

\begin{definition}[Integrally closed]
  Let $A \subset B$. $A$ is integrally closed in $B$ if the integral
  closure of $A$ in $B$ equals to $A$.

  $A$ is integrally closed (without mention of any $B$) if it is
  integrally closed in \nameref{def:fractionfield} $\mathrm {Frac}(A)$.
  \label{def:integrallyclosed}
\end{definition}

\begin{example}
  $\mathbb{Z}$ is \nameref{def:integrallyclosed}. 
\end{example}

\begin{remark}
  More generally any
  \nameref{def:ufd} is \nameref{def:integrallyclosed}.
  \begin{proof}
    Let $A$ be a \nameref{def:ufd} and $x \in \mathrm {Frac}(A)$ such
    that $x \ne 0$. So
    $x = \frac{p}{q}$ such that $p,q \in A, \left(p, q\right) = 1$
    (this means no common prime divisor). If $x$ integral over $A$
    then
    \[
    \left(\frac{p}{q}\right)^n + a_{n-1}\left(\frac{p}{q}\right)^{n-1}
    + \dots + a_1 \frac{p}{q} + a_0 = 0.
    \]
    Thus
    \[
    \frac{p^n + q a_n p^{n-1} + q^2 a_{n-1} p^{n-2} + \dots + q^{n-1}
      a_1 p + q^n a_0}{q^n} = 0
    \]
    therefore $q \mid p^n$ which is in contradiction with
    $\left(p, q\right) = 1$. Unless $q$ is invertable that is $x \in A$.
    \end{proof}
\end{remark}

\subsection{Ring of integers in a number field}

\begin{definition}[Number field]
  Let $K$ is a finite extension of $\mathbb{Q}$ i.e.
  $\left[K:\mathbb{Q}\right] < \infty$. In the case $K$ is a number
  field. 
  \label{def:numberfield}
\end{definition}

Let $K$ is a \nameref{def:numberfield} and $\left[K:\mathbb{Q}\right]
= N$.
\begin{definition}[Ring of integers]
  Let $K$ is a \nameref{def:numberfield}. The ring of integers
  $O_K \subset K$ is the integral closure of $\mathbb{Z}$
  in $K$. 

  Note: We know that integral closure of $\mathbb{Z}$ in $\mathbb{Q}$
  is $\mathbb{Z}$ but now we consider the closure in $K$ but not in
  $\mathbb{Q}$. 
  \label{def:ringintegers}
\end{definition}

\begin{property}
  \begin{enumerate}
  \item $\forall \alpha \in K, \exists d \in \mathbb{Z} \setminus
    \{0\}$ such that $d\alpha \in O_K$.
  \item If $\alpha \in O_K$ then $P_{min}\left(\alpha,
    \mathbb{Q}\right) \in \mathbb{Z}\left[X\right]$.
  \end{enumerate}
  \begin{proof}
    For the first part lets
    $P_{min}\left(\alpha,
    \mathbb{Q}\right) = X^m + a_{m-1}X^{m-1} + \dots + a_1 X + a_0
    \in \mathbb{Q}\left[X\right]$.

    $\exists d \in \mathbb{Z}$ (the common denominator) such that
    $\forall i: d a_i \in \mathbb{Z}$. So
    $b_i = d^{m-i}a_i \in \mathbb{Z}$ for any $i$. Therefore
    \[
    \left(d \alpha\right)^m + b_{m-1} \left(d \alpha\right)^{m-1} +
    \dots + b_0 = 0.
    \]
    Thus $d \alpha \in O_K$.

    The second part is also easy. If we have such
    $\alpha \in O_K$, it is a
    root of some \nameref{def:monicpolynomial}
    $Q \in \mathbb{Z}\left[X\right]$.
    Then the $P_{min} \mid Q$. So $Q = P_{min} R$.
    If we pick $P_{min}$ to be monic, then by an
    argument very similar to that of the \nameref{lem:gauss} lemma,
    we conclude  that both $P_{min}, R \in \mathbb{Z}\left[X\right]$.  
  \end{proof}
  \label{property:lec9_2}
\end{property}

\section{Norm and trace}

\subsection{Finitely generated Abelian groups}
(The material was given inside the proof of theorem \ref{thm:lec9_1}
and can be considered as a recall)
The \nameref{def:fgagroup} is the same as
finitely generated $\mathbb{Z}$-module. Any such group is isomorphic
to (see theorem \ref{thm:fgagroup})
\[
\mathbb{Z}^n \oplus A,
\]
where $A$ is a finite group (torsion part). A subgroup of
$\mathbb{Z}^n$ is itself a free ($\cong \mathbb{Z}^m$) of rank
$m \le n$.

\subsection{Norms and traces}
(The material was given inside the proof of theorem \ref{thm:lec9_1}
and can be considered as a recall)
\begin{definition}[Norm]
  Let $K \hookrightarrow E$ - finite separable field extension. Let $\alpha \in
  E$.   Define the norm of alpha with respect to this extension as
  \[
  \mathrm {N}_{E/K}\left(\alpha\right) =
  \prod_{\sigma_i: E \hookrightarrow \bar{K}} \sigma_i\left(\alpha\right)
  \]
  i.e. we took a product by all $K$ embeddings of $E$ into the
  algebraic closure of $K$. And we also assume that the product is
  finite i.e. $i = 1, \dots, r$.
  \label{def:norm}
\end{definition}

\begin{definition}[Trace]
  Let $K \hookrightarrow E$ - finite separable field extension. Let $\alpha \in
  E$.   Define the norm of alpha with respect to this extension as
  \[
  \mathrm {Tr}_{E/K}\left(\alpha\right) =
  \sum_{\sigma_i: E \hookrightarrow \bar{K}} \sigma_i\left(\alpha\right)
  \]
  i.e. we took a sum by all $K$ embeddings of $E$ into the
  algebraic closure of $K$. And we also assume that the sum is
  finite i.e. $i = 1, \dots, r$.
  \label{def:trace}
\end{definition}

In the definitions \ref{def:trace} and \ref{def:trace} we assume that
the extension $E$ is \nameref{def:separableextension}. If you're
extension is not separable then you won't have to take it to the power
equal to the pure inseparable degree of $E/K$, but for simplicity,
we shall suppose that everything is separate.

\begin{property}
  \begin{enumerate}
  \item $\mathrm{N}_{E/K}: E^\times \to K^\times$
    \footnote{
      $E^\times = E \setminus \{0\}$ and
      $K^\times = K \setminus \{0\}$
    }
    is multiplicative
    i.e. homomorphism of groups.
    $\mathrm{Tr}_{E/K}: E \to K$ is additive, $K$-linear
    i.e. homomorphism of $K$-vector spaces.
    \footnote{
      ??? May be there should be $\bar{K}$ instead of $K$.
    }    
  \item If $E=K\left(\alpha\right)$, $n = \left[E:K\right]$ and
    $P_{min}\left(\alpha, K\right) = X^n + a_1 X^{n-1} + \dots +
    a_{n-1} X + a_{n}$ then $\mathrm{N}_{E/K}\left(\alpha\right) = (-1)^n
    a_n$ and $\mathrm{Tr}_{E/K}\left(\alpha\right) = -a_1$.
  \item If we have the tower of extensions $K \subset F \subset E$
    then
    \[
    \mathrm{N}_{E/K}\left(\alpha\right) =
    \mathrm{N}_{F/K}\left(\alpha\right) \circ
    \mathrm{N}_{E/F}\left(\alpha\right)
    \]
    and the same for trace
    \[
    \mathrm{Tr}_{E/K}\left(\alpha\right) =
    \mathrm{Tr}_{F/K}\left(\alpha\right) \circ
    \mathrm{Tr}_{E/F}\left(\alpha\right)
    \]
    \item Consider $T: E \times E \xrightarrow[(x, y) \to
      \mathrm{Tr}_{E/K}\left(xy\right)  ]{} K$. This is a
      non-degenerate $K$-bilinear form (see
      definition \ref{def:nondegeneratebf}) 
    \item $\alpha$ integral over $\mathbb{Z}$, $K = \mathbb{Q}$. Then
      $\mathrm{N}_{E/\mathbb{Q}}\left(\alpha\right),
      \mathrm{Tr}_{E/\mathbb{Q}}\left(\alpha\right)$ are integers.
  \end{enumerate}
  \begin{proof}
    The first property is obvious from the definition.

    The second one uses the following fact:
    $\sigma_i\left(\alpha\right)$ are roots of $P_{min}\left(\alpha,
    K\right)$. The \nameref{def:norm} is a product and it's assigned
    to its constant term ($a_n$) and the sum is the first coefficient 
    term ($a_1$) (see also example \ref{ex:lec8_generalequation}).

    The third property is somewhat less trivial, so this follows from,
    the fact that if $\tau_1, \dots, \tau_k$ are $K$ embeddings of $F$
    into $\bar{K}$ and, $\mu_1, \dots, \mu_s$ are $F$ embeddings of
    $E$ into $\bar{K}$ then the embedings of $E$ into $\bar{K}$ are
    just the compositions $\{\tau_j \mu_i\}$.

    For the 4th property. Indeed if $x \in \ker T$ then
    $\mathrm{Tr}_{E/K}\left(xy\right) = 0, \forall y \in E$ (see
    definition \ref{def:nondegeneratebf}). But this
    can't be a case when $xy \in K \setminus \{0\}$ by definition
    \ref{def:trace} $\mathrm{Tr}_{E/K}\left(xy\right) =
    \left[E:K\right] xy$.

    For the 5th property we know that
    \begin{eqnarray}
    \mathrm{Tr}_{E/\mathbb{Q}}\left(\alpha\right) =
    \mathrm{Tr}_{\mathbb{Q}(\alpha)/\mathbb{Q}}\left(
    \mathrm{Tr}_{K/\mathbb{Q}(\alpha)}\left(\alpha\right)
    \right) =
    \nonumber \\
    =
    \mathrm{Tr}_{\mathbb{Q}(\alpha)/\mathbb{Q}}\left(
    \left[K:\mathbb{Q}(\alpha)\right] \alpha
    \right) =
    \left[K:\mathbb{Q}(\alpha)\right]
    \mathrm{Tr}_{\mathbb{Q}(\alpha)/\mathbb{Q}}\left(
     \alpha
    \right)
    \nonumber
    \end{eqnarray}
    but
    \(
    \mathrm{Tr}_{\mathbb{Q}(\alpha)/\mathbb{Q}}\left(
    \alpha
    \right) \in \mathbb{Z}
    \)
    because
    \(
    \mathrm{Tr}_{\mathbb{Q}(\alpha)/\mathbb{Q}}\left(
    \alpha
    \right)
    \) is a coefficient of $P_{min}\left(\alpha, \mathbb{Q}\right) \in
    \mathbb{Z}\left[X\right]$ (see property \ref{property:lec9_2}).     
  \end{proof}
  \label{property:lec9_norm_trace}
\end{property}

Why such names are used? Consider the following map
(multiplication by $a$)
\[
f_a: E \xrightarrow[x \to a x]{} E
\]
then the $\mathrm{Tr}_{E/K}\left(a\right)$ is exactly the trace of the
linear map (i.e. sum of diagonal elements of the linear map matrix in
a basis) and the $\mathrm{N}_{E/K}\left(a\right)$ is the
determinant
\footnote{
  ??? add a proof
}
. Now this $f_a$ is a linear map, a $K$-linear map. It's an
\nameref{def:endomorphism} of a vector space you are working, and the trace of a is
the trace of this endomorphism, and the norm of a is the determinant
of this endomorphism.  

\subsection{Theorem about rings of integers}
\begin{theorem}
  $O_k$ is a finitely generated (see definition \ref{def:fgmodule})
  $\mathbb{Z}$-module that is a \nameref{def:freemodule} of
  rank (see definition \ref{def:rankfreemodule}) $n$, where $n=
  \left[K:\mathbb{Q}\right]$. 
  \begin{proof}
    If $e_1, \dots, e_n$ is a $\mathbb{Q}$-basis of $K$ then
    $\forall i \exists d_i \in \mathbb{Z} \setminus
    \{0\}$ such that $d_i e_i \in O_K$ (see property
    \ref{property:lec9_2}). Therefore $O_K$ contains a free
    $\mathbb{Z}$-submodule of rank $n$
    \footnote{
      This is because $d_1 e_1, \dots, d_n e_n$ are linearly
      independent and form a basis of a free $\mathbb{Z}$-module. The
      number of the cardinality of the basis $n$.
    }.

    What is the $\mathbb{Z}$-module this is a finitely generated
    \nameref{def:fgagroup} and we know a lot of things about such
    groups (see above).

    We have to show that $O_K \subset A$ where $A$ is a free
    $\mathbb{Z}$-submodule of rank $n = \left[K:\mathbb{Q}\right]$.
    Let $e_1, \dots, e_n$ is a $\mathbb{Q}$-basis of $K$ (as above)
    contained in $O_K$. Consider the following map
    \[
    (x,y) \to \mathrm{Tr}_{K/\mathbb{Q}}\left(xy\right) 
    \]
    this is
    \nameref{def:nondegeneratebf} (see 4th property
    \ref{property:lec9_norm_trace}) therefore $\exists v_1, \dots,
    v_n$ - \nameref{def:dualspace} basis ($\mathbb{Q}$-basis of $K$) and
    $\mathrm{Tr}_{K/\mathbb{Q}}\left(e_i v_j\right) = \delta_{ij}$.

    We claim that $\mathbb{Z}$ submodule generated by $v_1, \dots,
    v_n$ contains $O_K$. Indeed let $\alpha \in O_K$ and write
    \(
    \alpha = \sum \alpha_i v_i, \alpha_i \in \mathbb{Q}
    \). We can do it because $\{v_i\}$ is a $\mathbb{Q}$ basis of
    $K$. But one can see that $\alpha_i \in \mathbb{Z}$ because
    $\alpha_i = \mathrm{Tr}_{K/\mathbb{Q}}\left(\alpha e_i\right)$ (by
    definition of $v_j$). Since $\alpha$ and $e_i$ are elements of
    $O_K$ then $\alpha e_i \in O_K$ too. Therefore
    $\mathrm{Tr}_{K/\mathbb{Q}}\left(\alpha e_i\right) \in
    \mathbb{Z}$. So $\alpha_i \in \mathbb{Z}$ and this one is what we
    want to proof. We have expressed any element of $O_K$ as a
    combination of $v_i$ with integral coefficients. So $O_K$ is contained
    in a $\mathbb{Z}$ submodule, generated by $\{v_i\}$.  
  \end{proof}
  \label{thm:lec9_1}
\end{theorem}

\section{Reduction modulo a prime}

Let $P \in \mathbb{Z}\left[X\right]$ - an irreducible polynomial with integer
coefficients. $K$ is a \nameref{def:splittingfield} of $P$ over
$\mathbb{Q}$ and $n = \left[K:\mathbb{Q}\right]$. Let
$G = Gal\left(P\right) \eqdef Gal\left(K/\mathbb{Q}\right)$. We denote
roots of $P$ as $\alpha_1, \dots, \alpha_n$ and they are elements of
$O_K$. $G$ acts on the set of roots, and on $O_K$. We will denote
$O_K$ as $A$. Let $p$ is a prime number and we will consider $A/pA$.
As we have seen
\[
A/pA \cong A \otimes \mathbb{Z}/p\mathbb{Z}
\]
there $n$-dimension vector space over $\mathbb{F}_p$. Maximal ideals
of $A/pA$ are in one-to-one correspondence with maximal ideals of $A$
containing $p$. As we know (see theorem
\ref{thm:structurefinitekalgebra}) there are only finitely many
maximal ideal in a finite field. Therefore $A$ also has finitly many
maximal ideals $J_1, \dots, J_r$ containing $p$. Our group $G$ acting
on $A$ must permute these maximal ideals in some way.

Lets consider a subgroup $D_i \subset G$ which stabilizes $J_i$ (see
definition \ref{def:stabilizersubgroup}) i.e.
\[
D_i = \{g \in G \mid g J_i = J_i\}.
\]
Let also $k_i = A/J_i$ - this is a field and there is a finite
extension of $\mathbb{F}_p$. Then there exists a natural homomorphism
\[
D_i \to Gal\left(k_i/\mathbb{F}_p\right).
\]
Since $D_i$ stabilizes $J_i$ and it acts on the residual classes of
modulo $J_i$ so there is a homomorphism of $D_i$ into the
\nameref{def:galoisgroup}.

\begin{theorem}
  \begin{enumerate}
  \item $G$ acts transitively (see definition \ref{def:transitive}) on
    $\{J_1, \dots, J_r\}$ and the map
    $D_i \to Gal\left(k_i/\mathbb{F}_p\right)$ is a
    \nameref{def:surjection} i. e.
    $D_i \twoheadrightarrow Gal\left(k_i/\mathbb{F}_p\right)$
    \item If the reduction $\bar{P} = P \mod p$ has no multiple roots
      then the map $D_i \to Gal\left(k_i/\mathbb{F}_p\right)$ is
      bijection and $k_i$ is a splitting field of the reduction
      $\bar{P}$. 
  \end{enumerate}
  \begin{proof}
    For the first part. Suppose that for some $i$ and $\forall g \in G,
    g\left(J_1\right) \ne J_i$ i.e. suppose that there is not a
    \nameref{def:transitive}. By \nameref{thm:chineseremainder}
    theorem $\exists x \in A$ such that
    $x \equiv 0 (\mod J_i),  x \equiv 1 (\mod g\left(J_1\right))
    \forall g \in G$. Consider a product of all such things:
    \[
    a = \prod_{g} g x
    \]
    it's an integer $a \in \mathbb{Z}$. But since $x \in J_i$ then $a$
    is also in $J_i$ (by ideal definition \ref{def:ideal} ):
    $a \in \mathbb{Z} \cap J_i = (p)$ - the ideal generated by the prime
    number $p$. So one has $a \in J_1$ since all $J_i$, and
    especially $J_1$, contains $p$. But this is impossible because
    $J_1$ is a \nameref{def:primeideal}. Because if we have
    $\prod_k x_k \in J_1$ then $\exists i$ such that $x_i \in J_1$ but
    there is not a case in our construction.

    We still need to proof that $D_i \twoheadrightarrow
    Gal\left(k_i/\mathbb{F}_p\right)$ i.e. that there is a
    \nameref{def:surjection}. We may assume that $i=1$. By the
    \nameref{thm:primitiveelement} theorem $\exists z \in
    \mathbb{F}_p$ such that $k_1 = \mathbb{F}_p\left(z\right)$. 
    By \nameref{thm:chineseremainder}
    theorem $\exists y \in A$ such that
    $y \in J_i, i \ne 1,  y \equiv z (\mod J_1)$. Consider polynomial
    $Q = \prod_{g \in G} \left(X - g\left(y\right)\right)$. There is a
    polynomial with integral coefficients i.e.
    $Q \in \mathbb{Z}\left[X\right]$. This is because we know that
    coefficients are $G$ invariant i.e. in $\mathbb{Q}$ moreover they
    are integral over $\mathbb{Z}$ and are in $\mathbb{Z}$ as soon as
    $\mathbb{Z}$ is integrally closed.

    Lets study $\bar{Q} = Q \mod J_1$. If $g \notin D_1$ then $\exists
    i$ such that $g\left(J_i\right) = J_1$ and particularly $g(y) \in
    J_1$. Therefore for such $g$ we have
    \[
    \overline{X -g\left(y\right)} = X -g\left(y\right) \mod J_1 = X. 
    \]
    So we have for $\bar{Q} \in \mathbb{F}_p\left[X\right]$
    \[
    \bar{Q} = \prod_{g \in G \setminus D_1} X \prod_{g \in D_1}
    \left(X - \overline{g\left(y\right)}\right),
    \]
    but
    \(
    \prod_{g \in D_1}
    \left(X - \overline{g\left(y\right)}\right)
    \) has $z$ as a root and $D_1$ acts transitively on its roots.

    Now recall that $z$ generates $k_1$. Thus an element of
    $Gal\left(k_1/\mathbb{F}_p\right)$ is determined by the image of
    $z$. And we have an element of $D_1$ which sends $z$ to any
    possible image of it. But this means that
    \(
    D_1 \twoheadrightarrow
    Gal\left(k_1/\mathbb{F}_p\right)
    \)

    For the second part of the theorem we assume that $\bar{P}$ has no
    multiple roots. So $\alpha_1, \dots, \alpha_n$ -roots of $P$ and
    $\bar{\alpha}_1, \dots, \bar{\alpha}_n$ -roots of $\bar{P}$ where
    $\bar{\alpha}_i = \alpha_i \mod J_1$ (??? may be $\mod p$).

    Lets $g \in D_1$ acts as $id$ on $k_1$. Then, of course,
    $g\left(\bar{\alpha}_i\right) = \bar{\alpha}_i$.
    But $g\left(\alpha_i\right) \in \{\alpha_1, \dots, \alpha_n\}$ and
    it can not be different from $\alpha_i$ since they will have
    diffeent reduction $\mod J_1$. So
    $\forall i,  g\left(\alpha_i\right) = \alpha_i$ and therefore $g =
    id$. Thus conclusion that $D_1 \cong
    Gal\left(k_1/\mathbb{F}_p\right)$. By the same argument
    \[
    Gal\left(k_1/\mathbb{F}_p\left[\bar{\alpha}_1,
      \dots, \bar{\alpha}_n\right]\right) = id
    \]
    therefore
    $k_1 = \mathbb{F}_p\left[\bar{\alpha}_1,
      \dots, \bar{\alpha}_n\right]$.
  \end{proof}
  \label{thm:lec9_2}
\end{theorem}

\section{Finding elements in Galois groups}
How can we apply the above material to study Galois groups?

One uses this theorem to construct elements of a certain type in the
Galois group to show that the Galois group is large.

So let $P \in \mathbb{Z}\left[X\right]$ be an
irreducible polynomial and suppose that there is a prime
$p \in \mathbb{Z}$ such that $\bar{P} = P \mod p$ is also irreducible.
Then $Gal\left(P\right)$ contains a subgroup that is isomorphic to 
$Gal\left(\bar{P}\right)$ and both
$Gal\left(P\right)$ and $Gal\left(\bar{P}\right)$ are
irreducible of degree $n$. But we know Galois group of finite fields
and we conclude that this Galois group contains an $n$ cycle.
This is because $Gal\left(\bar{P}\right)$ is cyclic generated by $n$ cycle.

Sometimes, there is no such prime, but of course, a variant of this
argument exists also in other cases.

Suppose, for instance that $P$ is irreducible of degree 5 and that
$\bar{P} = R_2 R_3$ where $R_i$ is irreducible of degree $i$.


Then the same argument, gives that
$Gal\left(P\right)$ contains the permutation $(1,2)$ and then
$(3,4,5)$ up to a numbering of roots.

And in this way one can construct elements of particular type in the
Galois group and use this to show that those groups are very large.  
