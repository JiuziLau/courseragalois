%% -*- coding:utf-8 -*- 
\documentclass[12pt,a4paper]{book}
\usepackage[toc,page]{appendix}
\usepackage[utf8]{inputenc}
\usepackage[T1,T2A]{fontenc}
\usepackage[english]{babel}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{array}
\usepackage{booktabs}
\usepackage{imakeidx}

% http://tex.stackexchange.com/questions/42343/how-to-add-a-navigation-window-to-a-latex-generated-pdf-document
\usepackage{hyperref}
\hypersetup{
  pdftex,
  allcolors=blue,
  bookmarksnumbered=true,     
  bookmarksopen=true,         
  bookmarksopenlevel=1,       
  colorlinks=true,            
  pdfstartview=Fit,           
  pdfpagemode=UseOutlines,  
  pdfpagelayout=TwoPageRight
}
\usepackage{hypcap}

\usepackage{tikz}
\usetikzlibrary{matrix,arrows}
\usepackage{mathtools}

\DeclareMathOperator{\Ima}{Im}
\newcommand{\eqdef}{\overset{\mathrm{def}}{=\joinrel=}}

\newtheorem{theorem}{Theorem}[chapter]

%
% https://tex.stackexchange.com/questions/98626/automatically-add-theorems-to-index-and-label-them/98634
%
\newtheorem{xdefinition}[theorem]{Definition}
\NewDocumentEnvironment{definition}{oo}
                       {\IfNoValueTF{#1}
                         % no optional argument to definition
                         {\begin{xdefinition}}
                         {\begin{xdefinition}[#1]\index{#1!definition}}
                       }%
                       {\end{xdefinition}}
\newtheorem{xexample}[theorem]{Example}
\NewDocumentEnvironment{example}{oo}
                       {\IfNoValueTF{#1}
                         % no optional argument to example
                         {\begin{xexample}}
                         {\begin{xexample}[#1]\index{#1!example}}
                       }%
                       {\end{xexample}}
\newtheorem{xremark}[theorem]{Remark}
\NewDocumentEnvironment{remark}{oo}
                       {\IfNoValueTF{#1}
                         % no optional argument to remark
                         {\begin{xremark}}
                         {\begin{xremark}[#1]\index{#1!remark}}
                       }%
                       {\end{xremark}}
\newtheorem{xlemma}[theorem]{Lemma}
\NewDocumentEnvironment{lemma}{oo}
                       {\IfNoValueTF{#1}
                         % no optional argument to lemma
                         {\begin{xlemma}}
                         {\begin{xlemma}[#1]\index{#1!lemma}}
                       }%
                       {\end{xlemma}}

\newtheorem{claim}[theorem]{Claim}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{property}[theorem]{Property}

%
% https://tex.stackexchange.com/questions/357118/expand-nameref-before-creating-index
%

\makeatletter
\newcommand{\getnamereftext}[1]{%
  \@ifundefined{r@#1}{}{%
    \unexpanded\expandafter\expandafter\expandafter{%
      \expandafter\expandafter\expandafter\@thirdoffive\csname r@#1\endcsname
    }%
  }%
}

\newcommand{\indexref}[1]{%
  {\nameref{#1}}%
  \expandafter\index{{\getnamereftext{#1}}}
}

\makeindex

\title{Introduction to Galois Theory}
\author{}
%\date{}
\begin{document}
\maketitle
\tableofcontents

\input ./introduction.tex
\input ./lecture1.tex
\input ./lecture2.tex
\input ./lecture3.tex
\input ./lecture4.tex
\input ./lecture5.tex
\input ./lecture6.tex
\input ./lecture7.tex
\input ./lecture8.tex
\input ./lecture9.tex
\input ./requirements.tex
\printindex
\bibliographystyle{gost780s}
\bibliography{galois}
\end{document}
